<!DOCTYPE html>
<html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.15.0/d3.min.js"></script>
</head>

<body>
    <script>
        //console.log(fetchData());
        fetchData();
        function fetchData() {
            let url = "https://raw.githubusercontent.com/freeCodeCamp/ProjectReferenceData/master/GDP-data.json";
            fetch(url).then(response => response.json()).then(data => {
                console.log(data.data);
                visualizeData();
                });
            //data.data becuz: first data is the argument of "then", second data is a property in the returned object, this property is an array
            /*from fcc
            The first line is the one that makes the request. So, fetch(URL) makes a GET request to the URL specified. The method returns a Promise.
    
            After a Promise is returned, if the request was successful, the then method is executed, which takes the response and converts it to JSON format.
    
            The then method also returns a Promise, which is handled by the next then method.
            */
        }

        function visualizeData(){
            let dataset = [
                [ "1947-01-01", 243.1 ],
                [ "1947-04-01", 246.3 ],
                [ "1947-07-01", 250.1 ],
                [ "1947-10-01", 260.3 ],
                [ "1948-01-01", 266.2 ],
                [ "1948-04-01", 272.9 ],
                [ "1948-07-01", 279.5 ],
                [ "1948-10-01", 280.7 ],
                [ "1949-01-01", 275.4 ],
                [ "1949-04-01", 271.7 ],
                [ "1949-07-01", 273.3 ],
            ];

            const w=500;
            const h=500;
            const padding = 60;

            //adding svg tag to the body with height and width
            const svg = d3.selectAll("body").append("svg").attr("width", w).attr("height", h);

            //adding rect svg tags using the dataset
            let zoom = 1;
            svg.selectAll("rect").data(dataset).enter().append("rect")
            .attr("x", (d, i)=>(i*26))
            .attr("y", (d)=>(h-zoom*d[1]))
            .attr("width", "25")
            .attr("height", (d)=>(zoom*d[1]))
            .attr("fill", "navy")            
            .append("title").text((d)=>(d[0]+"\n"+"$" + d[1] + " Billion"))
            //;
        }
    </script>
</body>

</html>